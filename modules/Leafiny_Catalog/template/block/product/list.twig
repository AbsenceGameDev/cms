{% set category = page.getCustom('category') %}
{% set products = block.getProducts(category.getCategoryId) %}
{% if products is not empty %}
    <div class="products pure-g" id="catalog">
        {% for product in products %}
            <div class="product pure-u-1-2 pure-u-lg-1-3">
                <div class="product-content">
                    {% set image = block.getMainImage(product.getProductId) %}
                    <a href="{{ page.getUrl }}{{ product.getPathKey }}.html">
                        {% if image %}
                            <img src="{{ page.getMediaUrl }}{{ page.imageResize(image.getImage, 600, 600) }}" class="pure-u-1" alt="{{ product.getName }}" loading="lazy" />
                        {% else %}
                            <img src="{{ page.getMediaUrl('Leafiny_Catalog::placeholder.png') }}" class="pure-u-1" alt="{{ product.getName }}" />
                        {% endif %}
                    </a>
                    <div class="product-info">
                        <a href="{{ page.getUrl }}{{ product.getPathKey }}.html">{{ product.getName }}</a>
                        <div class="product-sku"><strong>{{ 'Sku:'|translate }}</strong> {{ product.getSku }}</div>
                        <div class="product-price">{{ product.getPrice|number_format(2, ',', '') }} &euro;</div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    {% set totalPage = block.getTotalPages(category.getCategoryId) %}
    {% if (totalPage > 1) %}
        {% set currentPage = block.getPageNumber %}
        <div class="multipage pure-g">
            <div class="previous pure-u-1-2 pure-u-md-1-5 left">
                {% if (currentPage > 1) %}
                    <a href="{{ block.getPageUrl(page, currentPage - 1) }}#catalog">{{ 'Previous'|translate }}</a>
                {% endif %}
            </div>
            <div class="number pure-u-3-5 center">
                {% for i in 1..totalPage %}
                    <a href="{{ block.getPageUrl(page, i) }}#catalog"{% if block.getPageNumber == i %} class="active"{% endif %}>{{ i }}</a>
                {% endfor %}
            </div>
            <div class="next pure-u-1-2 pure-u-md-1-5 right">
                {% if (currentPage < totalPage) %}
                    <a href="{{ block.getPageUrl(page, currentPage + 1) }}#catalog">{{ 'Next'|translate }}</a>
                {% endif %}
            </div>
        </div>
    {% endif %}
{% endif %}
