<div id="form_gallery_{{ page.getCurrent.getInputDataName }}" class="form-gallery-selector">
    {% set fileNumber = 0 %}
    {% if form.getData(page.getModel.getPrimaryKey) %}
        {% set images = page.getCurrent.getImages(form.getData(page.getModel.getPrimaryKey), page.getModel.getObjectIdentifier) %}
        {% if images is not empty %}
            {% set fileNumber = images|length %}
            <div class="gallery-images pure-g">
                {% for image in images %}
                    <div class="image-container pure-u-1-2 pure-u-lg-4-24">
                        <div class="image-content{% if image.getStatus == 0 %} disabled{% endif %}">
                            <div class="image-file">
                                <div class="image" style="background-image: url('{{ page.getMediaUrl }}{{ image.getImage }}')"></div>
                            </div>
                            <a href="{{ page.getCurrent.getDeleteUrl(image.getImageId) }}#form_gallery_{{ page.getCurrent.getInputDataName }}" class="delete">{{ 'Delete'|translate }}</a>
                            {% if image.getStatus == 1 %}
                                <a href="{{ page.getCurrent.getStatusUrl(image.getImageId) }}#form_gallery_{{ page.getCurrent.getInputDataName }}">{{ 'Disable'|translate }}</a>
                            {% else %}
                                <a href="{{ page.getCurrent.getStatusUrl(image.getImageId) }}#form_gallery_{{ page.getCurrent.getInputDataName }}">{{ 'Enable'|translate }}</a>
                            {% endif %}

                            <select name="{{ page.getCurrent.getInputDataName }}[position][{{ image.getImageId }}]" class="pure-u-1">
                                {% for i in range(1, images|length) %}
                                    <option value="{{ i }}"{% if i == image.position %} selected="selected"{% endif %}>
                                        {{ 'Position'|translate }} {{ i }}{% if i == 1 %} ({{ 'Main'|translate }}){% endif %}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endif %}
    {% set maxFileNumber = page.getCustom('max_file_number') ?: 10000 %}
    {% if (fileNumber < maxFileNumber) %}
        <div class="gallery-form">
            <ul class="info">
                <li><strong>{{ 'Maximum file upload size:'|translate }}</strong> {{ page.getCurrent.getMaxFileSize() }}Mo</li>
                {% if (page.getCustom('recommended_file_size')) %}
                    <li><strong>{{ 'Recommended file size:'|translate }}</strong> {{ page.getCustom('recommended_file_size') }}</li>
                {% endif %}
            </ul>
            <button class="pure-button green" type="button" data-max-file-number="{{ maxFileNumber }}">{{ 'Add'|translate }}</button>
            <input type="file" name="{{ page.getCurrent.getInputFileName }}[]" style="display: none"/>
        </div>
    {% endif %}
</div>
